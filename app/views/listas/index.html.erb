<% content_for :title, "Listas" %>

<h1 class="mb-4">Minhas ToDo Lists</h1>

<%= link_to "Nova Lista", new_lista_path, class: "btn btn-primary mb-4" %>

<% if @listas.any? %>
  <div class="row">
    <% @listas.each do |lista| %>
      <div class="col-md-6 mb-3">
        <div class="card shadow-sm">
          <div class="card-body">
            <h5 class="card-title"><%= lista.titulo %></h5>

            <div class="d-flex justify-content-between">
              <%= link_to "Ver Detalhes", lista_path(lista), class: "btn btn-outline-primary btn-sm" %>
              <div>
                <%= link_to "Editar", edit_lista_path(lista), class: "btn btn-outline-info btn-sm me-2" %>
                <button type="button" class="btn btn-outline-danger btn-sm" data-bs-toggle="modal" data-bs-target="#modal-excluir-<%= lista.id %>">
                  Excluir
                </button>
              </div>
            </div>
          </div>
        </div>
      </div>

      <div class="modal fade" id="modal-excluir-<%= lista.id %>" tabindex="-1" aria-labelledby="modalLabel-<%= lista.id %>" aria-hidden="true">
        <div class="modal-dialog">
          <div class="modal-content">
            <div class="modal-header">
              <h5 class="modal-title" id="modalLabel-<%= lista.id %>">Confirmar Exclusão</h5>
              <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Fechar"></button>
            </div>
            <div class="modal-body">
              Tem certeza que deseja excluir a lista <strong><%= lista.titulo %></strong>?
            </div>
            <div class="modal-footer">
              <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancelar</button>
              <%= button_to "Confirmar Exclusão", lista_path(lista), method: :delete, class: "btn btn-danger" %>
            </div>
          </div>
        </div>
      </div>
    <% end %>
  </div>
<% else %>
  <div class="alert alert-info">Nenhuma lista encontrada.</div>
<% end %>
